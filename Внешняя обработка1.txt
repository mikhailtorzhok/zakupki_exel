
&НаКлиенте
Процедура Рассчитать(Команда)
	Сообщить("Привет, мир");
	МассивКорреспондентов = Новый Массив;
	МассивКорреспондентов = ЗапроситьСписокКонтрагентовНаСервере();
	//тзВСтроке = ЗапроситьСписокКонтрагентовНаСервере();
	Сообщить("Возврат Корреспондентов");
	//тз = ЗначениеИзСтрокиВнутр(тзВСтроке);
	//Сообщить(СтрДлина(тзВСтроке));
	//Сообщить ("Успешное восстановление таблицы из строки");	
	//Сообщить(МассивКорреспондентов[0]);
	i=0;
	Для Каждого Корреспондент Из МассивКорреспондентов Цикл
        Сообщить(Корреспондент);
		сообщить(Корреспондент.количество());
		//НапечататьТаблицуКорреспондентов(Корреспондент);
		Сообщить("Корреспондент.ИНН" + " = " + Корреспондент.ИНН);
		Сообщить("Корреспондент.Ссылка" + " = " + Корреспондент.Ссылка);
		i=i+1;
		Если i>=3 Тогда
            Прервать;
        КонецЕсли;
    КонецЦикла;

	
КонецПроцедуры



 &НаСервере
Функция ЗапроситьСписокКонтрагентовНаСервере()
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	Корреспонденты.Ссылка КАК Ссылка,
		|	Корреспонденты.ФизЛицо КАК ФизЛицо,
		|	Корреспонденты.ВидКорреспондента КАК ВидКорреспондента,
		|	Корреспонденты.ПолноеНаименование КАК ПолноеНаименование,
		|	Корреспонденты.КПП КАК КПП,
		|	Корреспонденты.ИНН КАК ИНН,
		|	Корреспонденты.КодПоОКПО КАК КодПоОКПО,	
		|	Корреспонденты.ГруппаДоступа КАК ГруппаДоступа,
		|	Корреспонденты.Комментарий КАК Комментарий,
		|ИЗ
		|	Справочник.Корреспонденты КАК Корреспонденты";
	РезультатЗапроса = Запрос.Выполнить();
	ТабКорреспондентов = РезультатЗапроса.Выгрузить();	
	//тзВСтроке = ЗначениеВСтрокуВнутр(ТабКорреспондентов); 	
	Сообщить("Создание таблицы корреспонденты завершено");	
	//Возврат(тзВСтроке);
	
	МассивКорреспондентов = Новый Массив;
	МассивКорреспондентов = ТаблицаЗначенийВМассив1(ТабКорреспондентов);
	Возврат(МассивКорреспондентов);
	
	
	
КонецФункции

&НаСервере
Функция ТаблицаЗначенийВМассив1(ТаблицаЗначений) 
    
    Массив = Новый Массив();
    СтруктураСтрокой = "";
    НужнаЗапятая = Ложь;
    Для Каждого Колонка Из ТаблицаЗначений.Колонки Цикл
        Если НужнаЗапятая Тогда
            СтруктураСтрокой = СтруктураСтрокой + ",";
        КонецЕсли;
        СтруктураСтрокой = СтруктураСтрокой + Колонка.Имя;
        НужнаЗапятая = Истина;
    КонецЦикла;
    Для Каждого Строка Из ТаблицаЗначений Цикл
        НоваяСтрока = Новый Структура(СтруктураСтрокой);
        ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка);
        Массив.Добавить(НоваяСтрока);
    КонецЦикла;
    Возврат Массив;

КонецФункции


	
			 


